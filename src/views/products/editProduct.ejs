<!DOCTYPE html>
<html lang="es">

    <%- include('../partials/head', {title: "Editar producto"}) %>

<body class="body body--createProduct body--registro-login">
    
    <%- include('../partials/header')  %> 

    <main class="main">
        <form action="/products/edit/<%= productToEdit.id %>?_method=PUT" method="POST" class="formCreateProduct animate__animated animate__fadeInDown" enctype="multipart/form-data">
            
            <ul class="erroresRegistro-ul" id="errorEditProductUl"></ul>
            <div class="form__cont-elements">
                <h5 class="form__seccion-h5">Nombre del producto:</h5>
                <input type="text" class="input__create-product" name="nombre" placeholder="Ej: GameSoul" value= "<%= productToEdit.name_game%>">
                <% if (locals.errors && errors.nombre) { %>
                    <p class="text-danger"><%= errors.nombre.msg %></p>
                <% } %>
            </div>
            
            <div class="form__cont-elements">
                <h5 class="form__seccion-h5">Descripción del producto:</h5>
                <textarea class="input__create-product" name="descripcion" placeholder="Ej: GameSoul es un juego multiplataforma..." cols="30" rows="5"><%= productToEdit.description %></textarea>
                <% if (locals.errors && errors.descripcion) { %>
                    <p class="text-danger"><%= errors.descripcion.msg %></p>
                <% } %>
            </div>

            <div class="form__cont-elements">
                <h5 class="form__seccion-h5">Inserta una imagen:</h5>
                <input type="file" class="input__create-product" id= "imagen_editar_producto" accept=".png, .jpg" multiple name="imagen">
                <% if (locals.errors && errors.imagen) { %>
                    <p class="text-danger"><%= errors.imagen.msg %></p>
                <% } %>
            </div>

            <div class="form__cont-elements">
                <h5 class="form__seccion-h5">Selecciona un género:</h5>
                <select class="input__create-product" name="genero">
                    <option disabled selected>- Genero -</option>
                    <% allGenres.forEach(genero => { %>
                        <option value="<%= genero.id %>" <%= locals.oldData && oldData.genero == genero.id || productToEdit.genres_id == genero.id? "selected" : "" %>> <%= genero.name_genre %> </option>
                    <% }) %>
                </select>
                <% if (locals.errors && errors.genero) { %>
                    <p class="text-danger"><%= errors.genero.msg %></p>
                <% } %>
            </div>

            <div class="form__cont-elements">
                <h5 class="form__seccion-h5">Seleccioná una edición:</h5>
                <select class="input__create-product" name="edicion">
                    <option disabled selected>- Edición -</option>
                    <% allEditions.forEach(edicion => { %>
                        <option value="<%= edicion.id %>" <%= locals.oldData && oldData.edicion == edicion.id || productToEdit.genres_id == edicion.id? "selected" : "" %>> <%= edicion.name_editions %> </option>
                    <% }) %>
                </select>
                <% if (locals.errors && errors.edicion) { %>
                    <p class="text-danger"><%= errors.edicion.msg %></p>
                <% } %>
            </div>

            <div class="form__cont-elements">
                <h5 class="form__seccion-h5">Escribe un precio:</h5>
                <input type="text" class="input__create-product" name="precio" value= "<%= productToEdit.price %>">
                <% if (locals.errors && errors.precio) { %>
                    <p class="text-danger"><%= errors.precio.msg %></p>
                <% } %>
            </div>

            <div class="form__cont-elements">
                <input type="submit" class="boton-enviar-producto" value="Editar Producto">
            </div>
        </form>
    </main> 

    <%- include ('../partials/footer') %>
    <script src="../../../public/js/validations/editProductJS.js"></script>
</body>
</html>